<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ER Diagram Tool</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/konva/8.3.6/konva.min.js"></script>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Yatra+One&display=swap" rel="stylesheet">

  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>

  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" integrity="sha384-tViUnnbYAV00FLIhhi3v/dWt3Jxw4gZQcNoSCxCIFNJVCx7/D55/wXsrNIRANwdD" crossorigin="anonymous">
  
  <link rel="shortcut icon" href="img/FavIcon.png" type="image/x-icon">
</head>


<body>
  <section>
    <button><ion-icon name="copy-outline"></ion-icon></button>
    <button id="resetView"><ion-icon name="refresh-outline"></ion-icon></button>
    <!-- <button><ion-icon name="code-working-outline"></ion-icon></button> -->
  </section>
  <header>
    <h1>ER Diagram Tool</h1>
    <div class="controls">
      <button id="createEntity">Crea Entità</button>
      <button id="addAttribute">Aggiungi Attributo</button>
      <button id="createRelation">Crea Associazione</button>
      <button id="createISA">Crea IS-A</button>


      <button id="zoomIn">Zoom +</button>
      <button id="zoomOut">Zoom -</button>

      <button id="saveImgBtn">Salva Immagine</button>
      <button id="saveJSONBtn">Esporta JSON</button>


      <button id="loadJSONBtn">Carica JSON</button>

      <button id="deleteBtn" class="btn-danger">Elimina</button>
    </div>
  </header>


  <div id="container"></div>


  <!-- Modal per la modifica del nome (entità, attributi, etc.) -->
  <div id="nameModal" class="modal">
    <header>Modifica Nome</header>
    <input type="text" id="nameInput" placeholder="Inserisci nome" autocomplete="off"/>
    <button id="confirmNameBtn">OK</button>
  </div>


  <!-- Modal per la creazione di una relazione -->
  <div id="relationModal" class="modal">
    <header>Crea Relazione</header>
    <input type="text" id="relNameInput" maxlength="12" placeholder="Nome della relazione"  autocomplete="off"/>
    <input type="text" id="card1Input" class="card" placeholder="Cardinalità lato 1 (es. 1, N)"  autocomplete="off"/>
    <input type="text" id="card2Input" class="card" placeholder="Cardinalità lato 2 (es. 0,1)" autocomplete="off" />
    <input type="text" id="card3Input" class="card" placeholder="Cardinalità lato 3 (es. 1,2)" autocomplete="off" />
    <input type="text" id="card4Input" class="card" placeholder="Cardinalità lato 4 (es. 1,1)" autocomplete="off" />
    <button id="confirmRelationBtn">OK</button>
  </div>


  <!-- Modale per la creazione/modifica di un attributo -->
  <div id="attributeModal" class="modal">
    <header>Modifica Attributo</header>
    <label>Nome Attributo:</label>
    <input type="text" id="attrNameInput" placeholder="Inserisci nome" autocomplete="off" />


    <div class="attrPrimaryKey">
      <label for="attrPrimaryKey">Primary Key</label>
      <input type="checkbox" name="primary" id="attrPrimaryKey" autocomplete="off" />
    </div>


    <button id="confirmAttributeBtn">OK</button>
  </div>
  <!-- Modale per gerarchia IS-A -->
  <div id="isaModal" class="modal" >
    <header>Crea Gerarchia IS-A</header>
    <div class="isa-inputs">
      <input type="text" placeholder="Nome figlio 1" required autocomplete="off">
    </div>
    <div class="isa-props">
      <select id="totalPartial">
        <option value="t">Totale (t)</option>
        <option value="p">Parziale (p)</option>
      </select>
      <select id="exclusiveOverlap">
        <option value="e">Esclusiva (e)</option>
        <option value="o">Overlapping (o)</option>
      </select>
    </div>
    <button id="addChildBtn">+ Aggiungi Figlio</button>
    <button id="confirmISABtn">Crea Gerarchia</button>
  </div>

  <footer>
    <script type="text/javascript" src="https://storage.ko-fi.com/cdn/widget/Widget_2.js"></script>
    <script type="text/javascript">
      kofiwidget2.init("Support me on Ko-fi", "#50c7bb", "F1F418TE32");
      kofiwidget2.draw();
    </script>
  </footer>

  <script type="module" src="js/entity.js"></script>
  <script type="module" src="js/utility.js"></script>
  <script type="module" src="js/attribute.js"></script>
  <script type="module" src="js/isa.js"></script>
  <script type="module" src="js/app.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>

</html>
